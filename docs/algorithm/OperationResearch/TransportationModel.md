# 运输问题

运输问题指的是一类把某种产品从若干个产地调运到若干个销地，在已知每个产地的供应量与每个销地的需求量，并知道各地之间的运输单价的前提下确定一个使
得总的运输费用最小的方案的一种问题。

说白了，多产地，多销地，怎么运，成本最低。

!!!note 
    本章涉及的建模与数学方法：
    * 产销平衡的数学模型
    * 如何使用表上作业法体验手工运算的乐趣（误）
      -使用最小元素法或元素差额法获得初始可行解
      -运用闭回路法或是位势法进行优化
    * 如何解决产销不平衡的问题
    
首先明确一点啊，就是所谓的运输问题，实际上还是线性规划问题，只不过在没有计算机的蛮荒时代，我们人类为了方便计算，专门把这种问题单独拿出来研究了一番。

所以本质上我们做的方法还是和单纯形法一样的，先确定基变量和非基变量，然后再确定初始基可行解，再求检验数，进行迭代和优化。

那么这里我们就一个一个来解释的。

**关于产销不平衡的生产模型问题，我们视作一个特殊的产销平衡问题来处理，在前面介绍方法的过程中，我们不会给太多的关注。**

# 回答第一个问题：如何启动单纯形法？（如何找到初始基可行解？）
这是我们要回答的第一个问题。

在经典的线性规划中，我们采用的是构建单位矩阵的方法来找到初始基可行解的。

而在这里，我们由于和现实应用的结合更紧密，我们就有了更美好的方法：表上作业法。

表上作业法有两种常用的方法来找到初始基可行解：

## 最小元素法
这是一个很tricky的方法，就很简单，从小到大找运价最小的，然后分配尽可能多的运量，以此类推迭代，得到一个初始基可行解。

## VOGEL近似法（元素差额法）
这个方法就更tricky了，首先我们要计算每一行和每一列的差额，构建出名为“罚数”的东西，然后选择罚数最大的行或列进行分配，分配规则和上面一样，直到所有需求和供应都满足为止。

最小元素法其实是没什么问题的，但VOGEL法有很多操作上的问题：

* 罚数相等时，如何选择行或列？
  **Ans**：一般选择运价较小的行或列。
* 分配时，若出现多个最小运价时，如何选择？
  **Ans**：一般选择供应量或需求量较大的那个。

# 回答第二个问题：如何进行优化？
当我们找到了初始基可行解之后，我们就可以开始进行优化了。
进行优化，其实说白了就是决定哪些变量进入基变量，哪些变量离开基变量。

那么我们实际上知道的是，在运输模型这一现实环境下，低运价的变量几乎不可能离开基变量，因为他们实在太廉价了。

所以我们只需要确定，有哪些非基变量，需要入基。

## 方法1：闭回路法
闭合回路法的核心是绘制闭回路，然后通过调整闭回路上的变量来优化总成本。

!!!tip "闭回路法步骤"
    1. 找到一个非基变量，假设它进入基变量。
    2. 绘制闭回路，闭回路上的变量交替增加和减少。（“第一条线增加，第二条线减少，第三条线增加，依此类推”）
    3. 计算调整后的总成本，选择使总成本降低的调整方案。
    4. 重复以上步骤，直到没有进一步降低总成本的可能。

## 方法2：位势法
位势法的核心是计算每个非基变量的检验数，然后根据检验数来决定是否进行调整。

!!!tip "位势法步骤"
    1. 计算基变量的位势值，通常选择一个基变量的位势值为0。
    2. 计算每个非基变量的检验数：检验数 = 运价 - (对应行的位势 + 对应列的位势)。
    3. 如果所有非基变量的检验数均为非负值，则当前解为最优解；否则，选择检验数最小的非基变量进入基变量。
    4. 使用闭回路法调整基变量和非基变量，重复以上步骤，直到达到最优解。

!!!note "如何确定设置哪一个基变量位势为0？"
    通常选择供应量或需求量较大的基变量对应的行或列的位势值为0，这样可以减少计算复杂度。

!!!summary 
    虽然运输问题在现代计算机面前看起来像一条路边，但在没有计算机的时代，这些方法可是极大地简化了人类的计算工作量，让我们能够更高效地解决实际问题。

    采用上述的方法反复优化我们就可以求出运输问题的最优解。